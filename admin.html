<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Panel Admin - Escuela de BarberÃ­a</title>
    <style>
        body { font-family: sans-serif; background: #121212; color: white; padding: 20px; }
        h1 { color: #d4af37; border-bottom: 2px solid #d4af37; padding-bottom: 10px; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; background: #1e1e1e; }
        th, td { padding: 15px; text-align: left; border-bottom: 1px solid #333; }
        th { background: #d4af37; color: black; }
        .badge { background: #4caf50; color: white; padding: 5px 10px; border-radius: 5px; font-size: 0.8rem; }
        button { background: #444; color: white; border: none; padding: 8px; cursor: pointer; border-radius: 4px; }
        button:hover { background: #666; }
    </style>
</head>
<body>
    <h1>ðŸ“‹ Alumnos en la Escuela (Presentes)</h1>
    <button onclick="cargarPresentes()">ðŸ”„ Actualizar Lista</button>
    
    <table>
        <thead>
            <tr>
                <th>Nombre del Alumno</th>
                <th>Hora de Entrada</th>
                <th>Estado</th>
            </tr>
        </thead>
        <tbody id="lista">
            </tbody>
    </table>

    <script>
        async function cargarPresentes() {
            const res = await fetch('/api/presentes');
            const data = await res.json();
            const lista = document.getElementById('lista');
            lista.innerHTML = '';

            data.forEach(reg => {
                const hora = new Date(reg.check_in).toLocaleTimeString();
                lista.innerHTML += `
                    <tr>
                        <td>${reg.users.full_name}</td>
                        <td>${hora}</td>
                        <td><span class="badge">PRESENTE</span></td>
                    </tr>
                `;
            });
        }
        // Cargar al entrar
        cargarPresentes();
        // Auto-actualizar cada 30 segundos
        setInterval(cargarPresentes, 30000);
    </script>
</body>
</html>